(this["webpackJsonpdel-app"]=this["webpackJsonpdel-app"]||[]).push([[0],{172:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),i=a(15),s=a.n(i),r=(a(58),a(4)),l=a(5),c=a(7),d=a(6),p=a(8),h=function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(a=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).ws=new WebSocket("ws://loratest0000.apic.eu-gb.mybluemix.net/ws"),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.ws.onopen=function(){console.log("connected")},this.ws.onmessage=function(e){var a=JSON.parse(e.data);t.props.updationOfData({incomingData:a})},this.ws.onclose=function(){console.log("disconnected")}}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h6",null,"connecting to server"))}}]),e}(o.Component),u=a(50),g=a.n(u),m=a(51),f=a.n(m),b=(a(67),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={weightArray:{},timingArray:{}},console.log("constructor"),console.log(a.props),console.log(a.props.dataArray[a.props.binNo]),a.state={weightArray:a.props.dataArray[a.props.binNo],timingArray:a.props.datetimeArray[a.props.binNo]},console.log(a.state.weightArray),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(t){console.log("component will receive new props"),"undefined"!=typeof t.visible&&(console.log(t),console.log(t.binNo),this.state={weightArray:t.dataArray[t.binNo],timingArray:t.datetimeArray[t.binNo]},console.log(this.state.weightArray),console.log(this.state.timingArray))}},{key:"render",value:function(){return console.log("rendering !!!!!!!!!!!!!!!!"),n.a.createElement("section",null,n.a.createElement("h1",null,"React-Modal Examples"),n.a.createElement(g.a,{visible:this.props.visible,width:"40%",height:"90%",effect:"fadeInUp",onClickAway:this.props.closeModal},n.a.createElement("div",null,n.a.createElement("h1",null,"Analytics for ",this.props.binNo),n.a.createElement("p",null,"Graph of Dustbin weight "),n.a.createElement(f.a,{options:{chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(t){return t+"%"},offsetY:-20,style:{fontSize:"12px",colors:["#125637"]}},xaxis:{categories:this.state.timingArray,position:"bottom",labels:{offsetY:15},axisBorder:{show:!0},axisTicks:{show:!0},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#eb3464",colorTo:"#34eb4c",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0,offsetY:-35}},fill:{gradient:{shade:"dark",type:"vertical",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[50,0,100,100]}},yaxis:{axisBorder:{show:!0},axisTicks:{show:!0},labels:{show:!0,formatter:function(t){return t+"%"}}},title:{text:"Monthly Inflation in Argentina, 2002",floating:!0,offsetY:320,align:"right",style:{color:"#e4fa20"}}},series:[{legend:"weight",name:"weight-1",data:this.state.weightArray}],type:"bar",width:500,height:320}),n.a.createElement("a",{href:"javascript:void(0);",onClick:this.props.closeModal},"Close"))))}}]),e}(o.Component)),y=a(22),v=function(t){function e(t){var a;Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={data:{},graphData:{},graphdatetimedata:{},showModal:!1,dustbinno:""},a.imageurl=function(t,e){return t<10||e<50?"https://cdn4.iconfinder.com/data/icons/32x32-free-design-icons/32/Flower.png":t>=10&&t<15||e>=50&&e<75?"https://cdn4.iconfinder.com/data/icons/32x32-free-design-icons/32/Warning.png":"https://cdn4.iconfinder.com/data/icons/32x32-free-design-icons/32/Error.png"},a.onMarkerClick=function(t){a.setState({showModal:!0,dustbinno:"id"+t.id}),console.log(a.state.dustbinno),console.log(t.quantity)},a.closeModalfunc=function(){a.setState({showModal:!1})};var o=JSON.parse(a.props.dataToBePlotted.Maptojson),n=JSON.parse(a.props.dataToBePlotted.Datimemap);return a.state={data:a.props.dataToBePlotted,graphData:o,showModal:!1,graphdatetimedata:n},setTimeout((function(){}),2e3),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.closeModalfunc(),console.log("component recieved new props");var e=this.state.data;e.Slice.push(t.dataToBePlotted.Slice[0]);var a="id".concat(t.dataToBePlotted.Slice[0].id);console.log(a);var o=new Date,n=o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+"  "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds();if(a in this.state.graphData){console.log("id exists");s=this.state.graphData,i=this.state.graphdatetimedata;s[a].push(t.dataToBePlotted.Slice[0].quantity),i[a].push(n),this.state={data:e,graphData:s,graphdatetimedata:i,dustbinno:a,showModal:!1},console.log(this.state.graphdatetimedata,"new data id exists")}else{console.log("id does not exist");var i,s=this.state.graphData,r=[t.dataToBePlotted.Slice[0].quantity];s[a]=r,(i=this.state.graphdatetimedata)[a]=[n],this.state={data:e,graphData:s,graphdatetimedata:i,dustbinno:a,showModal:!1},console.log(this.state.graphdatetimedata,"new data")}}},{key:"render",value:function(){var t=this;return console.log(this.state.showModal,"render"),console.log(this.state.data,"component did mount"),console.log(this.state.graphData,"component did mount"),console.log(this.state.dustbinno,"dustbinno"),n.a.createElement("div",null,n.a.createElement("h2",null,"updated gmap",this.props.ct),n.a.createElement(y.Map,{google:this.props.google,style:{width:"100%",height:"100%",position:"relative"},className:"map",initialCenter:{lat:19.0268,lng:72.8556},zoom:16},this.state.data.Slice.map((function(e){return n.a.createElement(y.Marker,{onClick:function(){t.onMarkerClick(e)},icon:t.imageurl(e.quantity,e.filledpct),position:{lat:e.lat,lng:e.lng},title:"Id No"+e.id+" quantity "+e.quantity+"Filled_pct"+e.filledpct})}))),n.a.createElement(b,{visible:this.state.showModal,closeModal:this.closeModalfunc,binNo:this.state.dustbinno,dataArray:this.state.graphData,datetimeArray:this.state.graphdatetimedata}))}}]),e}(o.Component),w=Object(y.GoogleApiWrapper)({})(v),O=function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(a=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).state={dataFromServer:{},count:1},a.updateBinData=function(t){a.setState({dataFromServer:t.incomingData}),console.log(a.state.dataFromServer,"dataFromServer")},a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(h,{updationOfData:this.updateBinData}),n.a.createElement("h1",null," lora test file react"),n.a.createElement("h1",null,"updated app ",this.state.count),n.a.createElement(w,{dataToBePlotted:this.state.dataFromServer}))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},53:function(t,e,a){t.exports=a(172)},58:function(t,e,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.c4ffaac7.chunk.js.map